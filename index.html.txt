<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Scan liên tục</title>
  <style>
    body { margin:0; background:black }
    video { width:100vw; height:100vh; object-fit:cover }
    #msg {
      position:fixed;
      bottom:12px;
      width:100%;
      text-align:center;
      color:#0f0;
      font-size:16px;
      font-family:sans-serif;
    }
  </style>
</head>
<body>

<video id="video"></video>
<div id="msg">Đang quét…</div>

<script src="https://unpkg.com/@zxing/library@latest"></script>
<script>
  const reader = new ZXing.BrowserBarcodeReader();
  let lock = false;

  reader.decodeFromVideoDevice(null, "video", (res, err) => {
    if (res && !lock) {
      lock = true;

      const code = res.text;
      console.log("SCANNED:", code);

      navigator.vibrate?.(100);

      setTimeout(() => lock = false, 1000);
    }
  });
</script>

</body>
</html>
