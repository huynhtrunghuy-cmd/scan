<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Scan liên tục</title>
  <style>
    body { margin:0; background:black }
    video { width:100vw; height:100vh; object-fit:cover }
    #msg {
      position:fixed;
      bottom:12px;
      width:100%;
      text-align:center;
      color:#0f0;
      font-size:16px;
      font-family:sans-serif;
    }
  </style>
</head>
<body>

<video id="video"></video>
<div id="msg">Đang quét…</div>

<script src="https://unpkg.com/@zxing/library@latest"></script>
<script>
  const reader = new ZXing.BrowserBarcodeReader();
  let lock = false;

  reader.decodeFromVideoDevice(null, "video", (res, err) => {
    if (res && !lock) {
      lock = true;

      const code = res.text;
      fetch("LINK_WEB_APP_CỦA_MÀY", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ barcode: code })
});

      fetch("https://script.google.com/macros/s/AKfycbz9r9d2kdLL0npdPFuEd-tzq03mlM1Pps0hYKKlELCmaDHvjTERD871noMJKGaKCx5kHA/exec", {
  method: "POST",
  headers: {"Content-Type":"application/json"},
  body: JSON.stringify({ barcode: code })
});


      navigator.vibrate?.(100);

      setTimeout(() => lock = false, 1000);
    }
  });
</script>

</body>

</html>

